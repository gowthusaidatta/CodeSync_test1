<!-- Modified checking.html for CodeSync_test1 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeSync - Your Coding Stats</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.5/axios.min.js"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center p-6">
  <div class="w-full max-w-2xl p-6 bg-white rounded-xl shadow-lg">
    <h1 class="text-3xl font-bold text-center text-blue-700 mb-6">Your Coding Scores</h1>
    <div id="loading" class="text-center text-gray-500">Fetching scores...</div>
    <div id="results" class="hidden space-y-4">
      <div class="p-4 bg-gray-100 rounded-lg">
        <h2 class="font-semibold text-xl">LeetCode</h2>
        <p id="leetcodeScore" class="text-gray-700">Loading...</p>
      </div>
      <div class="p-4 bg-gray-100 rounded-lg">
        <h2 class="font-semibold text-xl">CodeChef</h2>
        <p id="codechefScore" class="text-gray-700">Loading...</p>
      </div>
      <div class="p-4 bg-gray-100 rounded-lg">
        <h2 class="font-semibold text-xl">HackerRank</h2>
        <p id="hackerrankScore" class="text-gray-700">Loading...</p>
      </div>
      <div class="p-4 bg-gray-100 rounded-lg">
        <h2 class="font-semibold text-xl">GeeksforGeeks</h2>
        <p id="gfgScore" class="text-gray-700">Loading...</p>
      </div>
    </div>
  </div>

  <script>
    const leetcode = sessionStorage.getItem("leetcode");
    const codechef = sessionStorage.getItem("codechef");
    const hackerrank = sessionStorage.getItem("hackerrank");
    const gfg = sessionStorage.getItem("gfg");

    async function fetchScores() {
      try {
        const [gfgRes, othersRes] = await Promise.all([
          axios.get(`https://1irslt4qe5.execute-api.us-east-1.amazonaws.com/prob/get-score?username=${gfg}`),
          axios.get(`https://8teu07es5h.execute-api.us-east-1.amazonaws.com/prob/get-score`, {
            params: {
              leetcode,
              codechef,
              hackerrank
            }
          })
        ]);

        document.getElementById("leetcodeScore").innerText = `Total Problems Solved: ${othersRes.data.leetcode.totalSolved}`;
        document.getElementById("codechefScore").innerText = `Rating: ${othersRes.data.codechef.rating}`;
        document.getElementById("hackerrankScore").innerText = `Badges: ${othersRes.data.hackerrank.badges.length}`;
        document.getElementById("gfgScore").innerText = `Coding Score: ${gfgRes.data.score || 'N/A'}`;

        document.getElementById("loading").style.display = "none";
        document.getElementById("results").classList.remove("hidden");

      } catch (err) {
        document.getElementById("loading").innerText = "Failed to fetch scores. Please try again.";
        console.error(err);
      }
    }

    fetchScores();
  </script>
</body>
</html>
